import os
from configparser import ConfigParser

config = ConfigParser()

# Check if the API_KEY and API_SECRET environment variables are set
api_key = os.environ.get('API_KEY', None)
api_secret = os.environ.get('API_SECRET', None)

# If environment variables are not set, try to read from config.ini file
if not api_key or not api_secret:
    config.read('config.ini')
    api_key = config.get('keys', 'api_key', fallback=None)
    api_secret = config.get('keys', 'api_secret', fallback=None)

# If API_KEY and API_SECRET are still not set, raise an error or handle it as needed
if not api_key or not api_secret:
    raise ValueError("API_KEY or API_SECRET not provided")

# Use the API key and secret in your application
print("API Key:", api_key)
print("API Secret:", api_secret)

# Optionally, write the API keys back to the config.ini file
config.set('keys', 'api_key', api_key)
config.set('keys', 'api_secret', api_secret)

with open('config.ini', 'w') as config_file:
    config.write(config_file)
